#!/usr/bin/env ruby
$LOAD_PATH << File.expand_path('../../lib', __FILE__)

require 'rubygems'
require 'dotman'

case ARGV.first
when 'clone'
  Dotman::Base.ensure_dotman_folder_exists
  Dotman::Git.klone(ARGV[1], ARGV[2])
when 'use'
  Dotman::User.set(ARGV[1])
when 'collect'
  Dotman::Collect.new.create_dotman
when 'list'
  Dotman::DotfileCollection.show_all_aliases
when 'alias'
  if ARGV[1] == 'rename'
    Dotman::DotfileCollection.change_alias(ARGV[2], ARGV[3])
  elsif ARGV[1] == 'list'
    Dotman::DotfileCollection.show_all_aliases
  end
else
  puts "USAGE:\n
    dot clone <git_repository> <alias> : clone the dotfiles repo\n
    dot use <alias> : use the dotfiles\n
    dot list : lists all downloaded dotfile aliases\n
    dot use default : switch to the default dot files\n
    dot collect : collects all dot files within a directory called dotfiles\n
    dot alias rename <old alias> <new alias> : changes alias from old to new\n
    dot alias list : same as dot list"
end
